<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <title>EUA</title>
  </head>
  <body>
    <header
      class="bg-zinc-800 w-screen h-[8vh] flex items-center justify-center text-white text-xl"
    >
      Espace Room - Teste
    </header>
    <!--ParabÃ©ns Ryan, feliz aniversÃ¡rio-->
    <main class="flex flex-col items-center justify-center h-[92vh] px-4 py-8 gap-4">
        <h1 class="text-3xl font-bold text-center text-gray-800">
            ParabÃ©ns Ryan, feliz aniversÃ¡rio!
        </h1>

        <img 
            src="images/eua.jpg" 
            alt="Estados Unidos" 
            class="max-w-full h-auto object-cover rounded-lg shadow-md mx-auto block"
            loading="lazy"
        />
        <form class="flex flex-col gap-6 w-full max-w-md border-t border-gray-300 pt-6">
            <label class="flex flex-col gap-4">
                Senha da prÃ³xima sala: 
                <input 
                    type="password" 
                    id="key" 
                    name="key" 
                    class="border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                    placeholder="Digite a senha"/>
            </label>
            <button class="bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors duration-300">
                Ir para a prÃ³xima sala
            </button>
        </form>

        <div id="success-message" class="hidden w-full max-w-md bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg shadow-md">
            <div class="flex flex-col items-center gap-3">
                <h2 class="text-xl font-bold">ğŸ‰ ParabÃ©ns, Ryan!</h2>
                <p class="text-center">VocÃª desbloqueou a prÃ³xima fase!</p>
                <a 
                    href="https://drive.google.com/drive/folders/1dsaRtJqXm4-rhTIchXi_gxvKIkDaS8rn?usp=sharing"
                    target="_blank"
                    class="bg-green-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-green-700 transition-colors duration-300 flex items-center gap-2"
                >
                    ğŸ“ Acessar Pasta do Drive
                </a>
                <p class="text-sm text-center text-green-600">
                    Clique no link acima para continuar sua aventura!
                </p>
            </div>
        </div>


        <div id="error-message" class="hidden w-full max-w-md bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg shadow-md">
            <div class="flex flex-col items-center gap-2">
                <h3 class="text-lg font-bold">âŒ Senha Incorreta</h3>
                <p class="text-center text-sm">Tente novamente!</p>
            </div>
        </div>
    </main>
    <script>
    (function(){
        const a=document.getElementById('key'),
              b=document.querySelector('button'),
              c=document.getElementById('success-message'),
              d=document.getElementById('error-message');
        
        const apiUrl = 'https://api.jsonbin.io/v3/b/685f35148561e97a502d1978';
        let passwords = null;
        
        async function loadPasswords() {
            try {
                const response = await fetch(apiUrl, {
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Master-Key': '$2a$10$04AADEUWZ0F.DYYFvC0aLOTrpDG8MJzvqoztxzSfEJn8llgLno8Vy'
                    }
                });
                const data = await response.json();
                
                passwords = data.record || data;
            } catch (error) {
                console.log('âŒ Erro ao carregar API:', error);
                passwords = null;
            }
        }
        
        function checkPassword(input) {
            if (!passwords) {
                return input === 'Chame o bico';
            }
            
            const isCorrect = input === passwords.room1;
            
            return isCorrect;
        }
        
        function hideMessages() {
            c.classList.add('hidden');
            d.classList.add('hidden');
        }
        
        function showSuccess() {
            c.classList.remove('hidden');
            c.scrollIntoView({behavior:'smooth'});
            a.value='';
        }
        
        function showError() {
            d.classList.remove('hidden');
            d.scrollIntoView({behavior:'smooth'});
            a.value='';
        }
        
        function handleSubmit() {
            const input = a.value.trim();
            hideMessages();
            checkPassword(input) ? showSuccess() : showError();
        }
        
        loadPasswords();
        
        b.addEventListener('click', (e) => {
            e.preventDefault();
            handleSubmit();
        });
        
        a.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                handleSubmit();
            }
        });
    })();
    </script>
  </body>
</html>
